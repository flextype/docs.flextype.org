<!doctype html>
<html lang="{{ locale }}">
    {% set entry_locale = entries.fetch(locale) %}
    {% set static_version = 2 %}
    <head>
        {% block head %}
            <meta charset="{{ registry.get('flextype.settings.charset')|lower }}">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="description" content="{% if entry.description %}{{ entry.description }}{% else %}{{ registry.get('plugins.site.settings.description') }}{% endif %}">
            <meta name="keywords" content="{% if entry.keywords %}{{ entry.keywords }}{% else %}{{ registry.get('plugins.site.settings.keywords') }}{% endif %}">
            <meta name="robots" content="{% if entry.robots %}{{ entry.robots }}{% else %}{{ registry.get('plugins.site.settings.robots') }}{% endif %}">
            <meta name="generator" content="Powered by Flextype {{ FLEXTYPE_VERSION }}"/>

            <meta name="image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">

            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="{{ url() }}/{{ entry.slug }}">
            <meta name="twitter:title" content="{{ entry.title }}">
            <meta name="twitter:description" content="{{ entry.description }}">
            <meta name="twitter:image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">

            <meta property="og:url" content="{{ url() }}/{{ entry.slug }}">
            <meta property="og:title" content="{{ entry.title }}">
            <meta property="og:description" content="{{ entry.description }}">
            <meta property="og:type" content="website">
            <meta property="og:image" content="https://github.com/flextype/flextype/raw/dev/site/plugins/admin/preview.png">
            <meta property="og:image:type" content="image/png">

            <meta name="yandex-verification" content="920bbfc83bbe3fbe"/>

            <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
            <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
            <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
            <link rel="manifest" href="/site.webmanifest">

            <!-- Yandex.Metrika counter -->
            <script type="text/javascript">
                (function (m, e, t, r, i, k, a) {
                    m[i] = m[i] || function () {
                        (m[i].a = m[i].a || []).push(arguments)
                    };
                    m[i].l = 1 * new Date();
                    k = e.createElement(t),
                    a = e.getElementsByTagName(t)[0],
                    k.async = 1,
                    k.src = r,
                    a.parentNode.insertBefore(k, a)
                })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

                ym(56663935, "init", {
                    clickmap: true,
                    trackLinks: true,
                    accurateTrackBounce: true,
                    webvisor: true
                });
            </script>
            <noscript>
                <div><img src="https://mc.yandex.ru/watch/56663935" style="position:absolute; left:-9999px;" alt=""/></div>
            </noscript>
            <!-- /Yandex.Metrika counter -->

            <link rel="canonical" href="{{ url() }}/{{ entry.slug }}">

            {% do
                emitter.emit('onThemeMeta') %}

            <title>
                {% if entry.title %}{{ entry.title|e('html') }}
                    |
                {% endif %}{{ registry.get('plugins.site.settings.title')|e('html') }}</title>

            <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&amp;subset=cyrillic,cyrillic-ext,latin-ext" rel="stylesheet">
            <script src="https://kit.fontawesome.com/588226d8c5.js"></script>

            <link href="{{ url() ~ '/project/themes/' ~ registry.get('plugins.site.settings.theme') ~ '/assets/highlight/styles/tomorrow-night-bright.css' }}?v={{ static_version }}" rel="stylesheet">
            <link href="{{ url() ~ '/project/themes/' ~ registry.get('plugins.site.settings.theme') ~ '/assets/dist/css/build.min.css' }}?v={{ static_version }}" rel="stylesheet">

            {% if registry.has('assets.site.css') %}
                {% for css in registry.get('assets.site.css') %}
                    {% if css %}
                        <script type="text/javascript" src="{{ url() }}/{{ js }}"></script>
                    {% endif %}
                {% endfor %}
            {% endif %}

            {% do
                emitter.emit('onThemeHeader') %}
        {% endblock %}
    </head>
    <body>
        <div class="w-full flex">
            <div id="shadow" onclick="hideMenu();" class="hidden z-30 fixed block opacity-75 h-full w-full" style="background: black;"></div>
            <div id="menu" class="hidden lg:block w-3/12 pl-12 pt-6 pb-10 text-brand-white bg-brand-black sidebar">
                <div class="flextype-docs-logo">
                    <h2>FLEXTYPE</h2>
                    <h3>DOCUMENTATION</h3>
                </div>
                <h4>{{ entry_locale.txt.categories.getting_started.title }}</h4>
                <ul class="m-0 p-0 list-none">
                   <li class="{% if entry.slug == locale %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}" class="no-underline">{{ entry_locale.txt.categories.getting_started.what_is_flextype }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/requirements" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/requirements" class="no-underline">{{ entry_locale.txt.categories.getting_started.requirements }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/installation" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/installation" class="no-underline">{{ entry_locale.txt.categories.getting_started.installation }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/configuration" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/configuration" class="no-underline">{{ entry_locale.txt.categories.getting_started.configuration }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/folder-structure" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/folder-structure" class="no-underline">{{ entry_locale.txt.categories.getting_started.folder_structure }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/php-constants" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/php-constants" class="no-underline">{{ entry_locale.txt.categories.getting_started.php_constants }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/coc" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/coc" class="no-underline">{{ entry_locale.txt.categories.getting_started.coc }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/getting-help" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/getting-help" class="no-underline">{{ entry_locale.txt.categories.getting_started.getting_help }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/getting-started/license" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/getting-started/license" class="no-underline">{{ entry_locale.txt.categories.getting_started.license }}</a>
                   </li>
               </ul>
               <h4 class="pt-8">{{ entry_locale.txt.categories.concepts.title }}</h4>
               <ul class="m-0 p-0 list-none">
                   <li class="{% if entry.slug == locale ~ "/concepts/entries" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/concepts/entries" class="no-underline">{{ entry_locale.txt.categories.concepts.entries }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/concepts/plugins" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/concepts/plugins" class="no-underline">{{ entry_locale.txt.categories.concepts.plugins }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/concepts/parsers" %}active{% endif %}">
                       <a href="#" class="no-underline opacity-50">{{ entry_locale.txt.categories.concepts.parsers }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/concepts/serializers" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/concepts/serializers" class="no-underline">{{ entry_locale.txt.categories.concepts.serializers }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/concepts/content-apis" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/concepts/content-apis" class="no-underline">{{ entry_locale.txt.categories.concepts.content_apis }}</a>
                   </li>
                   <!--
                   <li class="{% if entry.slug == locale ~ "/concepts/performance" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/concepts/performance" class="no-underline">{{ entry_locale.txt.categories.concepts.perfomance }}</a>
                   </li>
                   -->
               </ul>
               <h4 class="pt-8">{{ entry_locale.txt.categories.api.title }}</h4>
               <ul class="m-0 p-0 list-none">
                   <li class="{% if entry.slug == locale ~ "/api/delivery" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/delivery" class="no-underline">{{ entry_locale.txt.categories.api.delivery }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/api/management" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/management" class="no-underline">{{ entry_locale.txt.categories.api.management }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/api/images" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/images" class="no-underline">{{ entry_locale.txt.categories.api.images }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/api/http-details" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/http-details" class="no-underline">{{ entry_locale.txt.categories.api.http_details }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/api/authentication" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/authentication" class="no-underline">{{ entry_locale.txt.categories.api.authentication }}</a>
                   </li>
                   <li class="{% if entry.slug == locale ~ "/api/errors" %}active{% endif %}">
                       <a href="{{ url() }}/{{ locale }}/api/errors" class="no-underline">{{ entry_locale.txt.categories.api.errors }}</a>
                   </li>
               </ul>
            </div>
            <div class="w-full lg:w-9/12">
                <a href="javascript:;" onclick="showMenu();" class="absolute lg:hidden right-0 top-0 mr-10 mt-12">
                    <i class="fas fa-bars"></i>
                </a>
                {% block content %}{% endblock %}
                <div class="border-t-3 ml-10 mr-10 pt-5 mt-2 pb-6 flex">
                    <div class="w-6/12 text-left">
                        {{ entry_locale.txt.common.language }}:
                        <a href="{{ url() }}/en">en</a>,
                        <a href="{{ url() }}/ru">ru</a>
                        Version: <a href="../">0.9.9</a> | 0.9.8 | <a href="{{ url() }}/0.9.7">0.9.7</a>
                    </div>
                    <div class="w-6/12 text-right">
                        {% if locale == 'en' %}
                            <a href="https://github.com/flextype/docs.flextype.org/tree/dev/site/entries/{{ entry.slug }}/entry.md">{{ entry_locale.txt.common.edit_this_page }}</a>
                        {% else %}
                            <a href="https://crowdin.com/project/flextype-documentation/{{ locale }}">{{ entry_locale.txt_link_edit_this_page }}</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {% set highlight_js = url() ~ '/project/themes/' ~ registry.get('plugins.site.settings.theme') ~ '/assets/highlight/highlight.pack.js' %}
        <script src="{{ highlight_js }}"></script>

        <script>
            function showMenu() {
                document.getElementById("menu").className = document.getElementById("menu").className.replace(/(?:^|\s)hidden(?!\S)/g, '');
                document.getElementById("menu").className = document.getElementById("menu").className.replace(/(?:^|\s)w-3\/12(?!\S)/g, '');
                document.getElementById("menu").className += " w-full";
                document.getElementById("menu").className += " absolute";
                document.getElementById("menu").className += " z-50";
                document.getElementById("shadow").className = document.getElementById("shadow").className.replace(/(?:^|\s)hidden(?!\S)/g, '');
            }

            function hideMenu() {
                document.getElementById("menu").className = document.getElementById("menu").className.replace(/(?:^|\s)absolute(?!\S)/g, '');
                document.getElementById("menu").className = document.getElementById("menu").className.replace(/(?:^|\s)w-full(?!\S)/g, '');
                document.getElementById("menu").className = document.getElementById("menu").className.replace(/(?:^|\s)z-50(?!\S)/g, '');
                document.getElementById("menu").className += " hidden";
                document.getElementById("menu").className += " 3/12";
                document.getElementById("shadow").className += " hidden";
            }

            hljs.configure({useBR: false});
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        </script>
        {% do
            emitter.emit('onThemeTail') %}
    </body>
</html>
